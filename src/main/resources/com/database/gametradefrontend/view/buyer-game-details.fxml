<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import java.net.URL?>
<AnchorPane xmlns="http://javafx.com/javafx/11.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.database.gametradefrontend.controller.BuyerGameDetailsController">
   
   <stylesheets>
      <URL value="@styles/vendormain.css" />
   </stylesheets>

   <!-- 主容器 -->
   <VBox alignment="TOP_CENTER" spacing="0" 
         AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" 
         AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      
      <!-- 顶部导航栏 -->
      <HBox alignment="CENTER" spacing="20" styleClass="top-navbar"
            style="-fx-background-color: rgba(255,255,255,0.95); -fx-padding: 15 30;">
         
         <!-- 页面标题 -->
         <HBox alignment="CENTER" spacing="15" HBox.hgrow="ALWAYS">
            <Label fx:id="pageTitleLabel" text="游戏详情" styleClass="section-title" style="-fx-font-size: 24px;"/>
         </HBox>
         
         <!-- 返回按钮 -->
         <Button fx:id="backButton" mnemonicParsing="false" onAction="#handleBackToMain"
                 styleClass="cancel-button" style="-fx-min-width: 80px;">
            <text>返回</text>
         </Button>
      </HBox>

      <!-- 主内容区域 -->
      <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                  style="-fx-background-color: rgba(255,255,255,0.8);">
         <VBox alignment="TOP_CENTER" spacing="20" style="-fx-padding: 30;">
            
            <!-- 游戏基本信息卡片 -->
            <HBox alignment="TOP_CENTER" spacing="30" 
                  style="-fx-padding: 20; -fx-background-color: rgba(255,255,255,0.9); -fx-border-radius: 8; -fx-background-radius: 8;">
               
               <!-- 游戏图片 -->
               <VBox alignment="CENTER" spacing="10" style="-fx-min-width: 300px;">
                  <ImageView fx:id="gameImageView" fitWidth="280" fitHeight="200" preserveRatio="true"
                            style="-fx-background-color: #f0f0f0; -fx-border-radius: 4; -fx-background-radius: 4;"/>
                  <Label text="游戏封面" styleClass="form-label" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
               </VBox>
               
               <!-- 游戏详情信息 -->
               <VBox alignment="TOP_LEFT" spacing="15" style="-fx-min-width: 400px;">
                  <Label fx:id="gameNameLabel" styleClass="section-title" style="-fx-font-size: 28px; -fx-text-fill: #333;"/>
                  
                  <GridPane hgap="15" vgap="10" alignment="TOP_LEFT">
                     <columnConstraints>
                        <ColumnConstraints halignment="RIGHT" minWidth="80"/>
                        <ColumnConstraints halignment="LEFT" minWidth="200"/>
                     </columnConstraints>
                     
                     <Label text="类别：" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                     <Label fx:id="categoryLabel" styleClass="form-value" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                     
                     <Label text="价格：" styleClass="form-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                     <Label fx:id="priceLabel" styleClass="form-value" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                     
                     <Label text="评分：" styleClass="form-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                     <Label fx:id="ratingLabel" styleClass="form-value" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                     
                     <Label text="厂商：" styleClass="form-label" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                     <Label fx:id="developerLabel" styleClass="form-value" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                     
                     <Label text="销量：" styleClass="form-label" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                     <Label fx:id="popularityLabel" styleClass="form-value" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                     
                     <Label text="发布时间：" styleClass="form-label" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                     <Label fx:id="releaseTimeLabel" styleClass="form-value" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                     
                     <Label text="状态：" styleClass="form-label" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                     <Label fx:id="statusLabel" styleClass="form-value" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                     
                     <Label text="版号：" styleClass="form-label" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                     <Label fx:id="licenseNumberLabel" styleClass="form-value" GridPane.rowIndex="7" GridPane.columnIndex="1"/>
                  </GridPane>
               </VBox>
            </HBox>
            
            <!-- 游戏描述 -->
            <VBox alignment="TOP_LEFT" spacing="10" 
                  style="-fx-padding: 20; -fx-background-color: rgba(255,255,255,0.9); -fx-border-radius: 8; -fx-background-radius: 8;">
               <Label text="游戏描述" styleClass="section-title" style="-fx-font-size: 18px;"/>
               <TextArea fx:id="descriptionArea" editable="false" wrapText="true" prefRowCount="6"
                        style="-fx-background-color: transparent; -fx-border-color: #ddd; -fx-border-radius: 4;"/>
            </VBox>
            
            <!-- 系统要求 -->
            <VBox alignment="TOP_LEFT" spacing="10" 
                  style="-fx-padding: 20; -fx-background-color: rgba(255,255,255,0.9); -fx-border-radius: 8; -fx-background-radius: 8;">
               <Label text="系统要求" styleClass="section-title" style="-fx-font-size: 18px;"/>
               <GridPane hgap="15" vgap="10" alignment="TOP_LEFT">
                  <columnConstraints>
                     <ColumnConstraints halignment="RIGHT" minWidth="100"/>
                     <ColumnConstraints halignment="LEFT" minWidth="300"/>
                  </columnConstraints>
                  
                  <Label text="操作系统：" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                  <Label fx:id="osRequirementLabel" styleClass="form-value" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                  
                  <Label text="处理器：" styleClass="form-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                  <Label fx:id="cpuRequirementLabel" styleClass="form-value" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                  
                  <Label text="内存：" styleClass="form-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                  <Label fx:id="memoryRequirementLabel" styleClass="form-value" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                  
                  <Label text="显卡：" styleClass="form-label" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                  <Label fx:id="gpuRequirementLabel" styleClass="form-value" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                  
                  <Label text="存储空间：" styleClass="form-label" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                  <Label fx:id="storageRequirementLabel" styleClass="form-value" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
               </GridPane>
            </VBox>
            
            <!-- 用户评价区域 -->
            <VBox alignment="TOP_LEFT" spacing="15" 
                  style="-fx-padding: 20; -fx-background-color: rgba(255,255,255,0.9); -fx-border-radius: 8; -fx-background-radius: 8;">
               <HBox alignment="CENTER_LEFT" spacing="15" HBox.hgrow="ALWAYS">
                  <Label text="用户评价" styleClass="section-title" style="-fx-font-size: 18px;"/>
                  <Label fx:id="averageRatingLabel" text="平均评分: 加载中..." styleClass="form-label"/>
               </HBox>
               
               <!-- 发表评价区域 -->
               <VBox alignment="TOP_LEFT" spacing="10" style="-fx-padding: 15; -fx-background-color: #f8f9fa; -fx-border-radius: 4;">
                  <Label text="发表评价" styleClass="form-label" style="-fx-font-weight: bold;"/>
                  <HBox alignment="CENTER_LEFT" spacing="10">
                     <Label text="评分：" styleClass="form-label"/>
                     <ComboBox fx:id="ratingComboBox" styleClass="form-input" style="-fx-min-width: 120px;"/>
                     <Button fx:id="submitReviewButton" mnemonicParsing="false" onAction="#handleSubmitReview"
                             styleClass="action-button" style="-fx-min-width: 80px;">
                        <text>提交</text>
                     </Button>
                  </HBox>
                  <TextArea fx:id="reviewTextArea" promptText="请输入您的评价内容..." prefRowCount="3" wrapText="true"
                           style="-fx-background-color: white; -fx-border-color: #ddd;"/>
               </VBox>
               
               <!-- 评价列表 -->
               <VBox fx:id="reviewsContainer" alignment="TOP_CENTER" spacing="10"/>
               
               <!-- 分页控件 -->
               <HBox alignment="CENTER" spacing="10">
                  <Button fx:id="prevPageButton" mnemonicParsing="false" onAction="#handlePrevPage"
                          styleClass="action-button" style="-fx-min-width: 60px;">
                     <text>上一页</text>
                  </Button>
                  <Label fx:id="pageInfoLabel" text="第 1 页" styleClass="form-label"/>
                  <Button fx:id="nextPageButton" mnemonicParsing="false" onAction="#handleNextPage"
                          styleClass="action-button" style="-fx-min-width: 60px;">
                     <text>下一页</text>
                  </Button>
               </HBox>
            </VBox>
            
            <!-- 购买按钮区域 -->
            <HBox alignment="CENTER" spacing="20" style="-fx-padding: 20;">
               <Button fx:id="addToCartButton" mnemonicParsing="false" onAction="#handleAddToCart"
                       styleClass="save-button" style="-fx-min-width: 200px; -fx-font-size: 16px;">
                  <text>加入购物车</text>
               </Button>
            </HBox>
            
         </VBox>
      </ScrollPane>
   </VBox>
</AnchorPane>
