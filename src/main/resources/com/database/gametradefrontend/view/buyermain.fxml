<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>
<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" prefHeight="800.0" prefWidth="1200.0"
            style="-fx-background-color: rgba(255,255,255,0.95);"
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.database.gametradefrontend.controller.BuyerMainController">
   
   <stylesheets>
      <URL value="@styles/buyermain.css" />
   </stylesheets>

   <!-- ‰∏ªÂÆπÂô® - ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä -->
   <VBox alignment="TOP_CENTER" spacing="0" 
         AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" 
         AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      
      <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
      <HBox alignment="CENTER" spacing="20" styleClass="top-navbar"
            style="-fx-background-color: rgba(255,255,255,0.95); -fx-padding: 15 30;">
         
         <!-- Áî®Êà∑‰ø°ÊÅØÂíåÈÄÄÂá∫ÊåâÈíÆ -->
         <HBox alignment="CENTER_RIGHT" spacing="15" HBox.hgrow="ALWAYS">
            <Label fx:id="userInfoLabel" text="‰π∞ÂÆ∂Áî®Êà∑" styleClass="user-info"/>
            <Button fx:id="logoutButton" mnemonicParsing="false" onAction="#handleLogout"
                    styleClass="logout-button">
               <graphic>
                  <Label text="üö™" styleClass="button-icon"/>
               </graphic>
               <text>ÈÄÄÂá∫ÁôªÂΩï</text>
            </Button>
         </HBox>
      </HBox>

      <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
      <HBox alignment="TOP_LEFT" spacing="0" VBox.vgrow="ALWAYS">
         
         <!-- Â∑¶‰æßÈÄâÈ°πÂç° -->
         <VBox alignment="TOP_CENTER" styleClass="tab-container"
               style="-fx-background-color: rgba(255,255,255,0.9); -fx-min-width: 200;">
            
            <!-- ÈÄâÈ°πÂç°Ê†áÈ¢ò -->
            <Label text="ÂäüËÉΩÂØºËà™" styleClass="tab-title" 
                   style="-fx-padding: 20 0 15 0;"/>
            
            <!-- ÈÄâÈ°πÂç°ÊåâÈíÆ -->
            <VBox alignment="TOP_CENTER" spacing="5" style="-fx-padding: 0 15;">
               <Button fx:id="gameStoreTab" mnemonicParsing="false" onAction="#showGameStore"
                       styleClass="tab-button, tab-active">
                  <graphic>
                     <Label text="üõí" styleClass="tab-icon"/>
                  </graphic>
                  <text>Ê∏∏ÊàèÂïÜÂ∫ó</text>
               </Button>
               
               <Button fx:id="myGamesTab" mnemonicParsing="false" onAction="#showMyGames"
                       styleClass="tab-button">
                  <graphic>
                     <Label text="üéÆ" styleClass="tab-icon"/>
                  </graphic>
                  <text>ÊàëÁöÑÊ∏∏ÊàèÂ∫ì</text>
               </Button>
               
               <Button fx:id="ordersTab" mnemonicParsing="false" onAction="#showOrders"
                       styleClass="tab-button">
                  <graphic>
                     <Label text="üìã" styleClass="tab-icon"/>
                  </graphic>
                  <text>ËÆ¢ÂçïÁÆ°ÁêÜ</text>
               </Button>
               
               <Button fx:id="profileTab" mnemonicParsing="false" onAction="#showProfile"
                       styleClass="tab-button">
                  <graphic>
                     <Label text="üë§" styleClass="tab-icon"/>
                  </graphic>
                  <text>‰∏™‰∫∫‰ø°ÊÅØ</text>
               </Button>
            </VBox>
         </VBox>

         <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
         <VBox alignment="TOP_CENTER" spacing="20" styleClass="content-area" 
               HBox.hgrow="ALWAYS" style="-fx-padding: 20;">
            
            <!-- Ê∏∏ÊàèÂïÜÂ∫óÈ°µÈù¢ -->
            <VBox fx:id="gameStoreContent" alignment="TOP_CENTER" spacing="20" 
                  VBox.vgrow="ALWAYS">
               <Label text="Ê∏∏ÊàèÂïÜÂ∫ó" styleClass="section-title"/>
               
               <!-- ÊêúÁ¥¢Âå∫Âüü -->
               <HBox alignment="CENTER" spacing="15" style="-fx-padding: 0 0 20 0;">
                  <!-- ÊêúÁ¥¢Ê°Ü -->
                  <TextField fx:id="searchField" promptText="ËæìÂÖ•Ê∏∏ÊàèÂêçÁß∞ÊêúÁ¥¢..." 
                            styleClass="search-field" HBox.hgrow="ALWAYS"/>
                  <Button fx:id="searchButton" mnemonicParsing="false" onAction="#handleSearch"
                          styleClass="search-button">
                     <graphic>
                        <Label text="üîç" styleClass="button-icon"/>
                     </graphic>
                     <text>ÊêúÁ¥¢</text>
                  </Button>
               </HBox>
               
               <!-- Á≠õÈÄâÂå∫Âüü -->
               <HBox alignment="CENTER" spacing="10">
                  <Label text="Á≠õÈÄâÊù°‰ª∂Ôºö" styleClass="filter-label"/>
                  <ComboBox fx:id="categoryFilter" promptText="Ê∏∏ÊàèÂàÜÁ±ª" styleClass="filter-combo"/>
                  <ComboBox fx:id="popularityFilter" promptText="Ê∏∏ÊàèÁÉ≠Â∫¶" styleClass="filter-combo"/>
                  <Button fx:id="preferenceFilter" mnemonicParsing="false" styleClass="filter-button">
                     <text>ÊàëÁöÑÂÅèÂ•Ω</text>
                  </Button>
                  <Button fx:id="resetFilterButton" mnemonicParsing="false" onAction="#handleResetFilter"
                          styleClass="filter-button">
                     <graphic>
                        <Label text="üîÑ" styleClass="button-icon"/>
                     </graphic>
                     <text>ÈáçÁΩÆ</text>
                  </Button>
               </HBox>
               
               <!-- Ê∏∏ÊàèÂàóË°®ÂÆπÂô® -->
               <ScrollPane fitToWidth="true" style="-fx-background: transparent; -fx-padding: 0 20;"
                          vbarPolicy="AS_NEEDED" hbarPolicy="NEVER" pannable="true">
                  <FlowPane fx:id="gameCardsContainer" hgap="20" vgap="20" 
                            alignment="TOP_CENTER" style="-fx-padding: 10;">
                     <!-- Ê∏∏ÊàèÂç°ÁâáÂ∞ÜÈÄöËøáÊéßÂà∂Âô®Âä®ÊÄÅÊ∑ªÂä† -->
                  </FlowPane>
               </ScrollPane>
            </VBox>

            <!-- ÊàëÁöÑÊ∏∏ÊàèÂ∫ìÈ°µÈù¢ -->
            <VBox fx:id="myGamesContent" alignment="TOP_CENTER" spacing="20" 
                  visible="false" managed="false" VBox.vgrow="ALWAYS">
               <Label text="ÊàëÁöÑÊ∏∏ÊàèÂ∫ì" styleClass="section-title"/>
               
               <!-- Ê∏∏ÊàèÂ∫ìÊìç‰ΩúÊåâÈíÆ -->
               <HBox alignment="CENTER" spacing="15">
                  <Button fx:id="refreshLibraryButton" mnemonicParsing="false" onAction="#handleRefreshLibrary"
                          styleClass="action-button">
                     <graphic>
                        <Label text="üîÑ" styleClass="button-icon"/>
                     </graphic>
                     <text>Âà∑Êñ∞Ê∏∏ÊàèÂ∫ì</text>
                  </Button>
                  <Button fx:id="downloadAllButton" mnemonicParsing="false" onAction="#handleDownloadAll"
                          styleClass="action-button">
                     <graphic>
                        <Label text="‚¨áÔ∏è" styleClass="button-icon"/>
                     </graphic>
                     <text>ÊâπÈáè‰∏ãËΩΩ</text>
                  </Button>
                  <Button fx:id="updateAllButton" mnemonicParsing="false" onAction="#handleUpdateAll"
                          styleClass="action-button">
                     <graphic>
                        <Label text="üîÑ" styleClass="button-icon"/>
                     </graphic>
                     <text>ÊâπÈáèÊõ¥Êñ∞</text>
                  </Button>
               </HBox>
               
               <!-- Ê∏∏ÊàèÂ∫ìÂàóË°® -->
               <TableView fx:id="libraryTable" styleClass="data-table">
                  <columns>
                     <TableColumn text="Ê∏∏ÊàèÂêç" styleClass="table-column"/>
                     <TableColumn text="ÂàÜÁ±ª" styleClass="table-column"/>
                     <TableColumn text="Ë¥≠‰π∞Êó∂Èó¥" styleClass="table-column"/>
                     <TableColumn text="Áä∂ÊÄÅ" styleClass="table-column"/>
                     <TableColumn text="Êìç‰Ωú" styleClass="table-column"/>
                  </columns>
               </TableView>
            </VBox>

            <!-- ËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ -->
            <VBox fx:id="ordersContent" alignment="TOP_CENTER" spacing="20" 
                  visible="false" managed="false" VBox.vgrow="ALWAYS">
               <Label text="ËÆ¢ÂçïÁÆ°ÁêÜ" styleClass="section-title"/>
               
               <!-- ËÆ¢ÂçïÊìç‰ΩúÊåâÈíÆ -->
               <HBox alignment="CENTER" spacing="15">
                  <Button fx:id="refreshOrdersButton" mnemonicParsing="false" onAction="#handleRefreshOrders"
                          styleClass="action-button">
                     <graphic>
                        <Label text="üîÑ" styleClass="button-icon"/>
                     </graphic>
                     <text>Âà∑Êñ∞ËÆ¢Âçï</text>
                  </Button>
                  <Button fx:id="createOrderButton" mnemonicParsing="false" onAction="#handleCreateOrder"
                          styleClass="action-button">
                     <graphic>
                        <Label text="‚ûï" styleClass="button-icon"/>
                     </graphic>
                     <text>ÁîüÊàêËÆ¢Âçï</text>
                  </Button>
               </HBox>
               
               <!-- ËÆ¢ÂçïÂàóË°® -->
               <TableView fx:id="ordersTable" styleClass="data-table">
                  <columns>
                     <TableColumn text="ËÆ¢ÂçïÂè∑" styleClass="table-column"/>
                     <TableColumn text="Ê∏∏ÊàèÂêç" styleClass="table-column"/>
                     <TableColumn text="‰ª∑Ê†º" styleClass="table-column"/>
                     <TableColumn text="Áä∂ÊÄÅ" styleClass="table-column"/>
                     <TableColumn text="‰∏ãÂçïÊó∂Èó¥" styleClass="table-column"/>
                     <TableColumn text="Êìç‰Ωú" styleClass="table-column"/>
                  </columns>
               </TableView>
            </VBox>

            <!-- ‰∏™‰∫∫‰ø°ÊÅØÈ°µÈù¢ -->
            <VBox fx:id="profileContent" alignment="TOP_CENTER" spacing="20" 
                  visible="false" managed="false" VBox.vgrow="ALWAYS">
               <Label text="‰∏™‰∫∫‰ø°ÊÅØ" styleClass="section-title"/>
               
               <!-- ‰∏™‰∫∫‰ø°ÊÅØË°®Âçï -->
               <GridPane hgap="15" vgap="15" alignment="CENTER">
                  <columnConstraints>
                     <ColumnConstraints halignment="RIGHT" minWidth="100"/>
                     <ColumnConstraints halignment="LEFT" minWidth="200"/>
                  </columnConstraints>
                  
                  <Label text="Ë¥¶Âè∑Ôºö" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                  <Label fx:id="accountLabel" styleClass="form-value" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                  
                  <Label text="ÊòµÁß∞Ôºö" styleClass="form-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                  <Label fx:id="nicknameLabel" styleClass="form-value" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                  
                  <Label text="ËÅîÁ≥ªÊñπÂºèÔºö" styleClass="form-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                  <Label fx:id="contactLabel" styleClass="form-value" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                  
                  <Label text="ÊÄßÂà´Ôºö" styleClass="form-label" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                  <HBox alignment="CENTER_LEFT" spacing="15" GridPane.rowIndex="3" GridPane.columnIndex="1">
                     <RadioButton fx:id="maleRadioButton" text="Áî∑" styleClass="radio-button"/>
                     <RadioButton fx:id="femaleRadioButton" text="Â•≥" styleClass="radio-button"/>
                  </HBox>
                  
                  <Label text="ÁîüÊó•Ôºö" styleClass="form-label" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                  <DatePicker fx:id="birthdayPicker" styleClass="form-input" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                  
                  <Button fx:id="saveProfileButton" mnemonicParsing="false" onAction="#handleSaveProfile"
                          styleClass="save-button" GridPane.rowIndex="5" GridPane.columnIndex="1">
                     <text>‰øùÂ≠ò‰øÆÊîπ</text>
                  </Button>
               </GridPane>
            </VBox>
         </VBox>
      </HBox>
   </VBox>
</AnchorPane>
